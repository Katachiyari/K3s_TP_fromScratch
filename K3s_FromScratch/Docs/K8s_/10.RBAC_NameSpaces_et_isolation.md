ğŸ“˜ Cours Kubernetes (Upstream) â€” Chapitre 10

ğŸ” SÃ©curitÃ© Kubernetes : RBAC, Namespaces et isolation


---

ğŸ¯ Objectifs pÃ©dagogiques

Ã€ la fin de ce chapitre, tu sauras :

Comment Kubernetes gÃ¨re les droits dâ€™accÃ¨s

Le rÃ´le du RBAC (Role-Based Access Control)

Comment utiliser les Namespaces pour isoler les environnements

Les bases de la sÃ©curisation dâ€™un cluster en production



---

ğŸ§  1. Pourquoi la sÃ©curitÃ© est cruciale

Dans un cluster Kubernetes :

Plusieurs Ã©quipes peuvent dÃ©ployer des applications

Plusieurs environnements cohabitent (dev, test, prod)

Les secrets et donnÃ©es sensibles circulent


ğŸ‘‰ Il faut contrÃ´ler qui peut faire quoi


---

ğŸ·ï¸ 2. Les Namespaces

Un namespace permet dâ€™isoler logiquement les ressources :

Namespace	Usage

dev	Environnement de dÃ©veloppement
staging	PrÃ©production
prod	Production


CrÃ©er un namespace :

kubectl create namespace prod

Lister :

kubectl get ns


---

ğŸ” 3. RBAC : contrÃ´le des accÃ¨s

Le RBAC dÃ©finit les permissions.

Ã‰lÃ©ment	RÃ´le

Role	Droits dans un namespace
ClusterRole	Droits Ã  lâ€™Ã©chelle du cluster
RoleBinding	Associe un utilisateur Ã  un Role
ClusterRoleBinding	Associe un utilisateur Ã  un ClusterRole


Documentation officielle :
https://kubernetes.io/docs/reference/access-authn-authz/rbac/


---

ğŸ“„ 4. Exemple simple de Role

Autoriser la lecture des Pods dans un namespace :

apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: prod
  name: pod-reader
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]


---

ğŸ”— 5. Associer un utilisateur Ã  ce rÃ´le

apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods
  namespace: prod
subjects:
- kind: User
  name: alice
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io


---

ğŸ§  6. Principe du moindre privilÃ¨ge

On donne le minimum de droits nÃ©cessaires :

âŒ Ne jamais donner cluster-admin par dÃ©faut
âœ” CrÃ©er des rÃ´les spÃ©cifiques par Ã©quipe


---

ğŸ§± 7. SÃ©curisation des Pods

Ã‰lÃ©ment	Pourquoi

SecurityContext	Restreindre privilÃ¨ges
runAsNonRoot	EmpÃªcher root
readOnlyRootFilesystem	SÃ©curitÃ©
Capabilities Linux	Limiter les privilÃ¨ges



---

ğŸŒ 8. Network Policies (isolation rÃ©seau)

Permettent de contrÃ´ler la communication entre Pods :

kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: allow-db
  namespace: prod
spec:
  podSelector:
    matchLabels:
      role: db
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: api


---

ğŸ“Œ RÃ©sumÃ© du chapitre

Ã‰lÃ©ment	RÃ´le

Namespace	Isolation logique
RBAC	ContrÃ´le des accÃ¨s
Role/ClusterRole	DÃ©finition des permissions
SecurityContext	SÃ©curitÃ© des conteneurs
NetworkPolicy	SÃ©curitÃ© rÃ©seau



---

ğŸ“ Ã€ retenir

> Kubernetes nâ€™est pas sÃ©curisÃ© par dÃ©faut.
Il faut configurer RBAC, isolation et politiques rÃ©seau pour un cluster production.




---

ğŸ”œ Chapitre suivant

ğŸš€ Bonnes pratiques et architecture de production Kubernetes
