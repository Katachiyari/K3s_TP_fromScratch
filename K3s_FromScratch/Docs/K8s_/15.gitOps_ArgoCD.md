ğŸ“˜ Cours Kubernetes (Upstream) â€” Chapitre 15

ğŸ§­ GitOps avancÃ© : Argo CD et Flux


---

ğŸ¯ Objectifs pÃ©dagogiques

Ã€ la fin de ce chapitre, tu sauras :

Ce quâ€™est vraiment le GitOps (au-delÃ  du concept)

Pourquoi le GitOps est devenu un standard en production

Le rÃ´le dâ€™un contrÃ´leur GitOps dans Kubernetes

Comparer Argo CD et Flux

Comprendre lâ€™architecture GitOps complÃ¨te



---

ğŸ§  1. Rappel : pourquoi le GitOps ?

En production Kubernetes, les problÃ¨mes classiques sont :

dÃ©rive de configuration

dÃ©ploiements manuels non tracÃ©s

rollbacks complexes

accÃ¨s humains trop permissifs


ğŸ‘‰ Le GitOps apporte une rÃ©ponse structurelle.


---

ğŸŒ± 2. DÃ©finition stricte du GitOps

Le GitOps repose sur 4 piliers :

Pilier	Description

Git = source de vÃ©ritÃ©	Ã‰tat dÃ©sirÃ© versionnÃ©
DÃ©claratif	Manifests Kubernetes
RÃ©conciliation continue	Correction automatique
ObservabilitÃ©	Ã‰tat rÃ©el vs Git


ğŸ“Œ Le cluster tire la configuration depuis Git (pull), il nâ€™est jamais poussÃ©.


---

ğŸ¤– 3. Le contrÃ´leur GitOps

Un contrÃ´leur GitOps est une application dans le cluster qui :

1. Observe un dÃ©pÃ´t Git


2. Compare Git â†” cluster


3. Applique les Ã©carts


4. Corrige toute dÃ©rive



ğŸ‘‰ Câ€™est un controller Kubernetes Ã  part entiÃ¨re.


---

ğŸ§© 4. Architecture GitOps type

DÃ©veloppeur
   â†“ git commit
Git (manifests)
   â†“
ContrÃ´leur GitOps (cluster)
   â†“
API Server Kubernetes
   â†“
Ã‰tat rÃ©el conforme Ã  Git

Aucun accÃ¨s direct au cluster nâ€™est requis pour dÃ©ployer.


---

ğŸš€ 5. Argo CD

PrÃ©sentation

Argo CD est un outil GitOps orientÃ© applications.

CaractÃ©ristiques :

Interface web

CLI

Synchronisation automatique ou manuelle

Visualisation de lâ€™Ã©tat (Healthy / Degraded)


Documentation officielle :
https://argo-cd.readthedocs.io/


---

Concepts Argo CD

Objet	RÃ´le

Application	DÃ©crit une app Kubernetes
Project	Regroupe les apps
Sync	Applique Git â†’ cluster
Health	Ã‰tat de lâ€™application



---

Cas dâ€™usage Argo CD

âœ” DÃ©ploiement applicatif
âœ” Visualisation claire
âœ” Multi-clusters
âœ” GitOps avec Helm / Kustomize


---

ğŸŒŠ 6. Flux

PrÃ©sentation

Flux est un outil GitOps natif Kubernetes, trÃ¨s intÃ©grÃ©.

CaractÃ©ristiques :

Pas dâ€™UI lourde

GitOps â€œpurâ€

DÃ©claratif jusquâ€™au bout

TrÃ¨s apprÃ©ciÃ© en environnement sÃ©curisÃ©


Documentation officielle :
https://fluxcd.io/docs/


---

Concepts Flux

Objet	RÃ´le

GitRepository	Source Git
Kustomization	Applique les manifests
HelmRelease	DÃ©ploiement Helm
Reconciliation	Boucle continue



---

âš–ï¸ 7. Argo CD vs Flux

CritÃ¨re	Argo CD	Flux

Interface UI	âœ… Oui	âŒ Non
Approche	App-centric	Cluster-centric
Helm	Oui	Oui
Kustomize	Oui	Oui
Courbe dâ€™apprentissage	Rapide	Plus technique


ğŸ‘‰ Les deux sont production-ready.


---

ğŸ” 8. SÃ©curitÃ© en GitOps

Bonnes pratiques :

Pratique	Pourquoi

AccÃ¨s cluster limitÃ©	Pas de kubectl humain
RBAC strict	Droits minimaux
Repos sÃ©parÃ©s	Code â‰  infra
Secrets chiffrÃ©s	SÃ©curitÃ©



---

ğŸ” 9. GitOps et rollback

Le rollback devient trivial :

git revert <commit>
git push

ğŸ‘‰ Le contrÃ´leur GitOps restaure automatiquement lâ€™Ã©tat prÃ©cÃ©dent.


---

ğŸ“Œ RÃ©sumÃ© du chapitre

Ã‰lÃ©ment	ClÃ©

GitOps	DÃ©ploiement dÃ©claratif
ContrÃ´leur	RÃ©conciliation continue
Argo CD	GitOps applicatif
Flux	GitOps natif
Git	Source unique de vÃ©ritÃ©



---

ğŸ“ Ã€ retenir

> En production Kubernetes moderne,
le cluster sâ€™administre depuis Git, pas depuis un terminal.




---

ğŸ”œ Chapitre suivant

ğŸ§° Maintenance & lifecycle du cluster
â¡ï¸ Upgrades
â¡ï¸ Sauvegardes
â¡ï¸ Disaster Recovery
