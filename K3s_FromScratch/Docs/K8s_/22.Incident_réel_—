Parfait.
On attaque ğŸ§ª Incidents rÃ©els, mÃ©thode opÃ©rateur PROD, pas de thÃ©orie inutile.
ğŸ‘‰ Incident #1 (le plus frÃ©quent et le plus bloquant)


---

ğŸ§ª Incident rÃ©el #1 â€” PVC bloquÃ© en Pending

ğŸ¯ Contexte rÃ©el

Lâ€™application ne dÃ©marre pas

Le Pod reste en Pending

Le stockage est externe (NFS / SAN / CSI)

Rien ne â€œcrashâ€, mais rien nâ€™avance



---

ğŸ”´ SymptÃ´me observable

kubectl get pods -n app

NAME        READY   STATUS    RESTARTS
api-app     0/1     Pending   0


---

ğŸ” Ã‰tape 1 â€” Identifier la vraie cause (rÃ©flexe nÂ°1)

ğŸ‘‰ TOUJOURS commencer par le PVC

kubectl get pvc -n app

NAME      STATUS    VOLUME   CAPACITY
app-pvc   Pending

ğŸš¨ Un Pod ne dÃ©marre JAMAIS si son PVC nâ€™est pas Bound


---

ğŸ” Ã‰tape 2 â€” Inspecter le PVC (commande clÃ©)

kubectl describe pvc app-pvc -n app

Exemples de messages critiques (rÃ©els)

âŒ Cas A â€” StorageClass inexistante

storageclass.storage.k8s.io "nfs-prod" not found

â¡ï¸ Cause

storageClassName mal orthographiÃ©

StorageClass supprimÃ©e / renommÃ©e


â¡ï¸ Correction

kubectl get storageclass

Corriger le YAML du PVC.


---

âŒ Cas B â€” CSI absent ou cassÃ©

failed to provision volume with StorageClass "nfs-prod"
no volume plugin matched

â¡ï¸ Cause

CSI non installÃ©

CSI crashÃ©

mauvais provisioner


â¡ï¸ VÃ©rification

kubectl get pods -n kube-system | grep csi

â¡ï¸ Correction

redÃ©ployer le CSI

corriger provisioner: dans la StorageClass



---

âŒ Cas C â€” Backend NFS inaccessible

mount.nfs: Connection timed out

â¡ï¸ Cause

VM NFS Ã©teinte

firewall

mauvaise IP / share


â¡ï¸ Test manuel (depuis un node)

showmount -e 10.10.10.50


---

ğŸ§  Ã‰tape 3 â€” VÃ©rifier la StorageClass (souvent oubliÃ©)

kubectl describe storageclass nfs-prod

Points critiques :

provisioner

server

share

reclaimPolicy


ğŸ“Œ Une StorageClass mal configurÃ©e = PVC bloquÃ© Ã  vie


---

ğŸ” Ã‰tape 4 â€” Une fois corrigÃ©

Supprimer le PVC (si safe)

kubectl delete pvc app-pvc -n app

Le recrÃ©er

kubectl apply -f pvc.yaml

VÃ©rifier

kubectl get pvc -n app

STATUS = Bound âœ…

ğŸ‘‰ Le Pod dÃ©marre automatiquement aprÃ¨s.


---

ğŸ§  Ce que cet incident tâ€™apprend (clÃ© PROD)

RÃ©alitÃ©	LeÃ§on

Pod bloquÃ©	Souvent stockage
Pending â‰  crash	Infra non prÃªte
PVC dâ€™abord	Toujours
CSI = critique	Sans lui, rien



---

ğŸ“Œ Checklist rÃ©flexe (Ã  mÃ©moriser)

1. kubectl get pvc


2. kubectl describe pvc


3. kubectl get storageclass


4. kubectl get pods -n kube-system | grep csi


5. Tester le backend (NFS/SAN)




---

ğŸ”œ Incident suivant (au choix)

ğŸ‘‰ Incident #2 â€” Pod en CrashLoopBackOff
(cas applicatif, probes, env vars, permissions)

ğŸ‘‰ Incident #3 â€” Ingress KO (404 / timeout)
(routage, Service, endpoints, controller)

ğŸ‘‰ Incident #4 â€” Application OK mais inaccessible
(NetworkPolicy / DNS)

Dis-moi lequel on traite en prioritÃ©.
