ğŸ“˜ Cours Kubernetes â€” Chapitre 2

ğŸ—ï¸ Installation et architecture dâ€™un cluster Kubernetes


---

ğŸ¯ Objectif du chapitre

Ce chapitre explique comment fonctionne un cluster Kubernetes, quels sont ses composants, et comment on prÃ©pare un environnement prÃªt pour la production.

On ne parle pas de Minikube ici âŒ
On se concentre sur une installation type cluster rÃ©el.


---

â˜¸ï¸ 1. Quâ€™est-ce quâ€™un cluster Kubernetes ?

Un cluster Kubernetes est composÃ© de machines (nÅ“uds) qui exÃ©cutent des conteneurs.

On distingue deux rÃ´les principaux :

RÃ´le	Description

ğŸ§  Control Plane	Cerveau du cluster
âš™ï¸ Workers	Machines qui exÃ©cutent les applications



---

ğŸ§  2. Le Control Plane (plan de contrÃ´le)

Le Control Plane pilote tout le cluster. Il contient plusieurs composants essentiels :

Composant	RÃ´le

API Server	Point dâ€™entrÃ©e de Kubernetes (kubectl, UI, etc.)
etcd	Base de donnÃ©es clÃ©/valeur qui stocke lâ€™Ã©tat du cluster
Scheduler	DÃ©cide sur quel nÅ“ud lancer les pods
Controller Manager	VÃ©rifie en permanence que lâ€™Ã©tat rÃ©el = Ã©tat dÃ©sirÃ©


ğŸ‘‰ Le Control Plane ne lance pas les applications, il les orchestrent.


---

âš™ï¸ 3. Les nÅ“uds Workers

Les workers exÃ©cutent les charges applicatives.

Chaque nÅ“ud contient :

Composant	RÃ´le

kubelet	Agent qui communique avec lâ€™API Server
kube-proxy	GÃ¨re le rÃ©seau interne du cluster
Container Runtime	ExÃ©cute les conteneurs (containerd, CRI-Oâ€¦)


ğŸ‘‰ Les applications tournent dans des Pods, qui vivent sur ces nÅ“uds.


---

ğŸ§© 4. Fonctionnement global

kubectl â†’ API Server â†’ etcd
                     â†“
               Scheduler
                     â†“
               NÅ“ud Worker
                     â†“
                   Pods

Kubernetes fonctionne en mode dÃ©claratif :

> Tu dÃ©clares ce que tu veux, Kubernetes sâ€™occupe de comment lâ€™obtenir.




---

ğŸ› ï¸ 5. PrÃ©requis pour installer un cluster

ğŸ–¥ï¸ Infrastructure minimale

Ã‰lÃ©ment	Minimum recommandÃ©

OS	Linux 64-bit
CPU	2 vCPU par nÅ“ud
RAM	4 Go par nÅ“ud
RÃ©seau	Tous les nÅ“uds doivent se joindre



---

ğŸ” Ports rÃ©seau nÃ©cessaires

Port	Usage

6443	API Server
10250	kubelet
30000â€“32767	Services NodePort
CNI	Selon plugin rÃ©seau (Flannel, Calico, Ciliumâ€¦)



---

ğŸŒ 6. RÃ©seau du cluster (CNI)

Kubernetes ne fournit pas de rÃ©seau par dÃ©faut.
On installe un plugin CNI (Container Network Interface).

Exemples courants :

Plugin	Usage

Flannel	Simple, lab
Calico	RÃ©seau + sÃ©curitÃ©
Cilium	RÃ©seau avancÃ© + eBPF



---

ğŸ’¾ 7. Stockage

Les applications ont souvent besoin de persistance. Kubernetes gÃ¨re cela via :

Objet	RÃ´le

PV (PersistentVolume)	Volume rÃ©el
PVC (PersistentVolumeClaim)	Demande de stockage
StorageClass	Type de stockage dynamique



---

ğŸ§  8. Philosophie Kubernetes

Principe	Explication

DÃ©claratif	On dÃ©crit lâ€™Ã©tat souhaitÃ©
Auto-rÃ©paration	RedÃ©marre les pods en Ã©chec
Haute dispo	RÃ©plication automatique
ScalabilitÃ©	Ajustement du nombre de pods
IndÃ©pendance infra	Fonctionne partout (on-prem, cloud)



---

ğŸ§ª 9. Environnements possibles

Type	Description

On-premise	Installation sur serveurs internes
Cloud managÃ©	EKS, AKS, GKE
Edge	Clusters lÃ©gers distribuÃ©s



---

ğŸ“Œ RÃ©sumÃ© du chapitre

Un cluster Kubernetes repose sur :

ğŸ§  un Control Plane qui orchestre

âš™ï¸ des Workers qui exÃ©cutent

ğŸŒ un rÃ©seau CNI

ğŸ’¾ un stockage persistant

ğŸ“œ une gestion dÃ©clarative de lâ€™Ã©tat


ğŸ‘‰ Kubernetes nâ€™est pas seulement un outil, câ€™est une plateforme complÃ¨te dâ€™exploitation applicative.


---

ğŸš€ Prochain chapitre

â¡ï¸ DÃ©ploiement des premiÃ¨res applications
â¡ï¸ Manipulation des objets Kubernetes
â¡ï¸ Introduction aux Pods et Deployments


